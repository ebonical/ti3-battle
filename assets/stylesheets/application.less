@import "bootstrap/reset";
@import "bootstrap/variables";
@import "bootstrap/mixins";
@import "bootstrap/component-animations";
@import "bootstrap/modals";
@import "mixins";

@baseFontSize: 14px;
@textColor: #333;
@bodyBackground: #FAFAFA;
@headingsColor: #1F1F1F;
@baseLineHeight: 1;
@gray:#666;

@primaryBtnColor: #08C;
@cautionBtnColor: #F90;

body {
  .reset;
  #font > .sans-serif;
  color: @textColor;
  background-color: @bodyBackground;
}

h1, h2, h3, h4 {
  color: @headingsColor;
  margin: 0;
}

p {
  margin: 0;
}
a {
  text-decoration: none;
}

// Top-level navigation
.main-nav {
  position: relative;
  width: 1024px;
  margin:auto;
  z-index: 2;
  ul {
    position: absolute;
    .horizontal-list;
  }
}
// Main area for content
.container {
  width: 1024px;
  margin:auto;
}
// Sections navigated to from main nav
.section {
  height: 768px - 20px;
  position: relative;
  display: none;
  &.active {
    display: block;
  }
}
.btn {
  font-weight: bold;
  font-size: 30px;
  line-height: 45px;
  color: #CCC;
  border: 1px solid #CCC;
  display: inline-block;
  padding: 0 18px;
}
.template {
  display: none;
}
a.disabled {
  .opacity(20);
}
#index {
  .game-options {
    text-align: center;
    padding-top: 180px;
    .btn {
      width: 180px;
      margin-bottom: 12px;
    }
    .new-game a {
      color: @primaryBtnColor;
      border-color: @primaryBtnColor;
    }
    .join-game a {
      color: @cautionBtnColor;
      border-color: @cautionBtnColor;
    }
  }
}
#battle {
  .round {
    text-align: center;
    h2 {
      font-weight: 200;
      font-size: 42px;
      .text-inset;
      margin: 0;
      padding: 20px 0;
      line-height: 1;
    }
    .pre-combat {
      display: none;
    }
    small {
      position: absolute;
      top:45px;
      margin-left: 22px;
      font-style: italic;
      font-size: 14px;
    }
    .skip-pre-combat {
      display: none;
      color: #08c;
    }
    &.zero {
      .default {
        display: none;
      }
      .pre-combat {
        display: inline;
      }
      .skip-pre-combat {
        display: inline-block;
      }
    }
  }

  .phase-message {
    .serif(16px);
    color: #286386;
    background-color: #D9EDF7;
    border-top:1px solid #BCE8F1;
    border-bottom:1px solid #BCE8F1;
    height: 35px;
    line-height: 35px;
    text-align: center;
  }
  .battle-actions {
    position: relative;
    margin: 45px 40px 0;
    text-align: right;
    .btn {
      margin-left: 12px;
    }
    .roll-dice {
      color: @primaryBtnColor;
      border-color: @primaryBtnColor;
    }
    .reset-dice {
      color: @cautionBtnColor;
      border-color: @cautionBtnColor;
    }
    .resolve-round {
      color: @primaryBtnColor;
      border-color: @primaryBtnColor;
    }
    .new-battle-action {
      position: absolute;
      .btn {
        margin-left: 0;
        margin-right: -1px;
      }
    }
    .new-battle {
      color: #BCB;
      border-color: #BCB;
    }
    .new-space-combat {
      color: #9F3F9F;
      border-color: #9F3F9F;
    }
    .new-ground-combat {
      color: #B18B65;
      border-color: #B18B65;
    }
  }
  .force {
    position: relative;
    margin: 25px 50px 0;

    & > h2 {
      font-size: 12px;
      font-weight: 300;
      line-height: 16px;
      text-transform: uppercase;
      color: #666;
      font-weight: bold;
      border-bottom: 1px dashed #e0e0e0;
    }

    h3.name {
      font-weight: normal;
      margin: 12px 0;
      .race {
        font-size: 26px;
        margin-right: 4px;
      }
      .player {
        .serif;
        color: @gray;
        font-size: 20px;
      }
    }
    .damage {
      display: none;
    }
    .order-of-battle {
      margin: 0 -12px;
      height: 165px;
      .clearfix;
    }

    .unit {
      position: relative;
      width: 135px;
      height: 165px;
      float:left;

      .image {
        position: absolute;
        top: 42px;
        left: 3px;
        width: 77px;
        height: 77px;
        z-index: 1;
        overflow: hidden;
        background: url("/images/units.png") no-repeat;
      }
      &.dreadnought .image {
        background-position-y:-77px;
      }
      &.cruiser .image {
        background-position-y:-154px;
      }
      &.destroyer .image {
        background-position-y:-231px;
      }
      &.fighter .image {
        background-position-y:-308px;
      }
      &.carrier .image {
        background-position-y:-385px;
      }
      &.ground .image {
        background-position-y:-462px;
      }
      &.pds .image {
        background-position-y:-539px;
      }
      &.dock .image {
        background-position-y:-616px;
      }
      .name {
        display: none;
      }
      .battle {
        z-index: 2;
        position: absolute;
        top: 34px;
        left: -3px;
        font-size: 16px;
        font-weight: bold;
        background: url("/images/battle-value.png") no-repeat;
        height: 30px;
        width: 30px;
        .value {
          display: block;
          line-height: 30px;
          text-align: center;
        }
        span {
          display: none;
        }
      }
      .dice {
        position: absolute;
        top:29px;
        height: 3px;
        width: 35px;
        background: url("/images/dice.png") no-repeat;
        strong, span {
          display: none;
        }
        &.dice-1 {
          display: none;
        }
        &.dice-2 {
          background-position-x:-24px;
        }
        &.dice-3 {
          background-position-x:-18px;
        }
        &.dice-4 {
          background-position-x:-12px;
        }
        &.dice-5 {
          background-position-x:-6px;
        }
        &.dice-6 {
          // background-position-x:0px;
        }
      }
      .quantity {
        position: absolute;
        top:0px;
        right: 5px;
        width: 40px;
        text-align: center;
        font-weight: bold;
        line-height: 1;
        .value {
          color: #454F60;
          font-size: 57px;
          // text-shadow: -1px -1px #222;
          line-height: 63px;
        }
        &.double .value {
          font-size: 40px;
        }
        a {
          display: block;
          font-size: 48px;
          color: #9FA4C0;
          &.decrease {
            line-height: 35px;
          }
        }
      }
      .adjust-battle-values {
        display: none;
        #battle > .force > .unit > .quantity;
        .value {
          font-size: 35px;
        }
        &.positive {
          .value {
            color: #060;
          }
        }
        &.negative {
          .value {
            color: #600;
          }
        }
      }
      .damage {
        position: relative;
        z-index: 10;
        width: 100%;
        height: 100%;
        a {
          position: absolute;
          top: 0;
          left: 0;
          display: block;
          width: 100%;
          height: 100%;
          .hide-text;
          z-index: 2;
        }
        .value {
          position: absolute;
          top: 17px;
          right: 28px;
          background: url("/images/unit-damage.png") no-repeat;
          width: 66px;
          height: 66px;
          display: block;
          text-align: center;
          font-weight: bold;
          font-size: 28px;
          line-height: 66px;
          color: #FFF;
          text-shadow: 1px 1px @grayDarker;
          z-index: 1;
        }
        &.zero {
          .value {
            display: none;
          }
        }
      }
      .rolls {
        position: absolute;
        top: 125px;
        margin-left: 10px;
        margin-right: 15px;
        #font > .serif(16px);
        .hit {
          color: #080;
        }
        .miss {
          color: @grayLight;
        }
      }
    } //.unit
    &.color-red .unit .image {
    }
    &.color-orange .unit .image {
      background-position-x: -77px;
    }
    &.color-yellow .unit .image {
      background-position-x: -154px;
    }
    &.color-green .unit .image {
      background-position-x: -231px;
    }
    &.color-blue .unit .image {
      background-position-x: -308px;
    }
    &.color-purple .unit .image {
      background-position-x: -385px;
    }
    &.color-gray .unit .image {
      background-position-x: -462px;
    }
    &.color-black .unit .image {
      background-position-x: -539px;
    }
    .force-actions {
      position: absolute;
      top: 115px;
      right: -25px;
      line-height: 22px;
      font-size: 12px;
      width: 110px;
      a {
        color: @grayDark;
        padding-left: 21px;
        display: inline-block;
      }
      .clear-units a {
        background: url("/images/btn-clear-units.png") no-repeat left center;
      }
      .adjust-battle-values a {
        background: url("/images/btn-adjust-battle.png") no-repeat left center;
      }
      .adjust-damage-values a {
        background: url("/images/btn-adjust-damage.png") no-repeat left center;
      }
      .clear-damage a {
        background: url("/images/btn-clear-damage.png") no-repeat left center;
      }
    }
    & > .damage {
      position: absolute;
      top: 31px;
      right: -25px;
      font-size: 14px;
      font-weight: lighter;
      width: 220px;
      div {
        display: inline-block;
        position: absolute;
      }
      .hits-from-opponent {
        border-right: 1px solid #CCC;
        padding-right: 8px;
        text-align: right;
        right: 50%;
        color: #C00;
        &.zero {
          color: inherit;
        }
      }
      .damage-applied {
        display: inline-block;
        border-left: 1px solid #FFF;
        padding-left: 5px;
        left: 50%;
      }
      .label {
        display: block;
      }
      .value {
        font-weight: bold;
        font-size: 24px;
      }
    }
  } //.force
  &.ground {
    .force.attacker {
      .unit.fighter, .unit.pds {
        visibility: hidden;
      }
    }
    .force.defender {
      .unit.warsun, .unit.dreadnought, .unit.fighter {
        visibility: hidden;
      }
    }
  }

  .round-summary {
    @summaryWidth: 940px;
    width: (@summaryWidth - (22 * 2)) !important;
    margin-left: (@summaryWidth / -2);

    h2 .win, h2 .draw {
      display: none;
    }
    h3.round {
      display: none;
    }
    // Battle states: someone has won, or it's a draw. default is 'continue'
    &.win {
      h2 .win {
        display: inline;
      }
      h2 .continue {
        display: none;
      }
    }
    &.draw {
      h2 .draw {
        display: inline;
      }
      h2 .continue {
        display: none;
      }
    }
    .force {
      float: left;
      width: 50%;
      box-sizing: border-box;
      margin: 25px 0;
      &:first-child {
        padding-right: 20px;
      }
      .stance {
        text-transform: capitalize;
        font-size: 14px;
        font-weight: 200;
      }
      h4 {
        font-size: 18px;
        font-weight: normal;
        .player {
          .serif(14px);
          color: @gray;
        }
      }
      .overview {
        .serif;
        margin: 12px 0;
        color: @gray;
      }
      .units {
        margin: 0;
        padding: 0;
      }
      .unit {
        display: block;
        width: auto;
        height: auto;
        list-style: none;
        padding: 0;
        margin: 0;
        float:none;
        span {
          position: static;
        }
        .name {
          display: none;
        }
        .battle {
          display: none;
        }
        .image {
          display: inline-block;
          width: 40px;
          height: 40px;
          background-image: url("/images/units-sm.png");
          vertical-align: middle;
        }
        &.dreadnought .image {
          background-position-y:-40px;
        }
        &.cruiser .image {
          background-position-y:-80px;
        }
        &.destroyer .image {
          background-position-y:-120px;
        }
        &.fighter .image {
          background-position-y:-160px;
        }
        &.carrier .image {
          background-position-y:-200px;
        }
        &.ground .image {
          background-position-y:-240px;
        }
        &.pds .image {
          background-position-y:-280px;
        }
        &.dock .image {
          background-position-y:-320px;
        }
        .rolls {
          margin: 0 3px;
        }
        .losses {
          color: #C00;
          .serif;
          &.zero {
            display: none;
          }
        }
      }
      &.color-red .unit .image {
      }
      &.color-orange .unit .image {
        background-position-x: -40px;
      }
      &.color-yellow .unit .image {
        background-position-x: -80px;
      }
      &.color-green .unit .image {
        background-position-x: -120px;
      }
      &.color-blue .unit .image {
        background-position-x: -160px;
      }
      &.color-purple .unit .image {
        background-position-x: -200px;
      }
      &.color-gray .unit .image {
        background-position-x: -240px;
      }
      &.color-black .unit .image {
        background-position-x: -280px;
      }
    } //.force
    .summary-actions {
      clear: both;
      text-align: right;
      .btn {
        margin-left: 12px;
      }
      .done {
        color: @grayLight;
        border-color: @grayLight;
      }
      .next-round {
        color: @primaryBtnColor;
        border-color: @primaryBtnColor;
      }
      .start-invasion-combat {
        color: #B18B65;
        border-color: #B18B65;
      }
    }
    &.finished {
      .done {
        color: @primaryBtnColor;
        border-color: @primaryBtnColor;
      }
    }
  }


  .reset-dice.btn {
    display: none;
  }

  .resolve-round.btn {
    display: none;
  }

  .adjusting-battle-values {
    .unit {
      .quantity {
        display: none;
      }
      .adjust-battle-values {
        display: block;
      }
    }
  }

  // After dice have been rolled we start applying damage
  &.dice-rolled {
    .hits-from-opponent {
      display: block;
    }
    .unit .quantity a {
      visibility: hidden;
    }
    .damage {
      display: block;
    }

    .roll-dice.btn {
      display: none;
    }
    .reset-dice.btn {
      display: inline-block;
    }
    .resolve-round.btn {
      display: inline-block;
    }
    .before-dice {
      display: none;
    }
    .order-of-battle .unit.zero {
      .opacity(50);
    }
  }

  &.round-resolved {
    .reset-dice.btn {
      display: none;
    }
  }

}

.hidden, .hide {
  display: none;
}
.invisible {
  visibility: hidden;
}
.modal {
  border-color: #aaa;
  padding: 22px;
  background: #f4f4f4;
  h2.heading {
    font-weight: 200;
    font-size: 42px;
    text-shadow: 1px 1px #fff;
    text-align: center;
    strong {
      font-weight: normal;
    }
  }
}
.modal-backdrop,
.modal-backdrop.fade.in {
  .opacity(50);
}
