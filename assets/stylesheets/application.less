@import "bootstrap/reset";
@import "bootstrap/variables";
@import "bootstrap/mixins";
@import "mixins";

@baseFontSize: 14px;
@textColor: #333;
@bodyBackground: #FAFAFA;
@headingsColor: #1F1F1F;
@baseLineHeight: 1;

body {
  .reset;
  #font > .sans-serif;
  color: @textColor;
  background-color: @bodyBackground;
}

h1, h2, h3 {
  color: @headingsColor;
}

p {
  margin: 0;
}
a {
  text-decoration: none;
}

// Top-level navigation
.main-nav {
  position: relative;
  width: 1024px;
  margin:auto;

  ul {
    position: absolute;
    .horizontal-list;
  }
}
// Main area for content
.container {
  width: 1024px;
  margin:auto;
}
// Sections navigated to from main nav
.section {
  position: relative;
  display: none;

  &.active {
    display: block;
  }
}
.btn {
  font-weight: bold;
  font-size: 30px;
  line-height: 45px;
  color: #CCC;
  border: 1px solid #CCC;
  display: inline-block;
  padding: 0 18px;
}
.hidden {
  display: none;
}
.template {
  display: none;
}
a.disabled {
  .opacity(20);
}
#index {
  .game-options {
    position: absolute;
    top: 50px;
  }
}
#battle {
  .round {
    text-align: center;
    h2 {
      font-weight: 200;
      font-size: 42px;
      .text-inset;
      margin: 0;
      padding: 20px 0;
      line-height: 1;
    }
    .pre-combat {
      .hidden;
    }
    .actions {
      .hidden
    }
    &.zero {
      .default {
        .hidden;
      }
      .pre-combat {
        display: inline;
      }
    }
  }

  .phase-message {
    .serif(16px);
    color: #286386;
    background-color: #D9EDF7;
    border-top:1px solid #BCE8F1;
    border-bottom:1px solid #BCE8F1;
    height: 35px;
    line-height: 35px;
    text-align: center;
  }
  .battle-actions {
    position: relative;
    margin: 60px 40px 0;
    text-align: right;
    .btn {
      margin-left: 12px;
    }
    .roll-dice {
      color: #09C;
      border-color: #09C;
    }
    .reset-dice {
      color: #F90;
      border-color: #F90;
    }
    .resolve-round {
      color: #09C;
      border-color: #09C;
    }
    .new-battle-action {
      position: absolute;
      .btn {
        margin-left: 0;
        margin-right: -1px;
      }
    }
    .new-battle {
      color: #BCB;
      border-color: #BCB;
    }
    .new-space-combat {
      color: #9F3F9F;
      border-color: #9F3F9F;
    }
    .new-ground-combat {
      color: #B18B65;
      border-color: #B18B65;
    }
  }
  .force {
    position: relative;
    margin: 25px 50px 0;

    & > h2 {
      font-size: 12px;
      font-weight: 300;
      line-height: 16px;
      text-transform: uppercase;
      color: #666;
      font-weight: bold;
      border-bottom: 1px dashed #e0e0e0;
    }

    h3.name {
      font-weight: normal;
      margin: 12px 0;
      .race {
        font-size: 26px;
        margin-right: 4px;
      }
      .player {
        .serif;
        color: @gray;
        font-size: 20px;
      }
    }
    .damage {
      .hidden;
    }
    .order-of-battle {
      margin: 0 -12px;
      height: 165px;
      .clearfix;
    }

    .unit {
      position: relative;
      width: 135px;
      height: 165px;
      float:left;

      .image {
        position: absolute;
        top: 42px;
        left: 3px;
        width: 77px;
        height: 77px;
        z-index: 1;
        overflow: hidden;
        background: url("/images/units.png") no-repeat;
      }
      &.dreadnought .image {
        background-position-y:-77px;
      }
      &.cruiser .image {
        background-position-y:-154px;
      }
      &.destroyer .image {
        background-position-y:-231px;
      }
      &.fighter .image {
        background-position-y:-308px;
      }
      &.carrier .image {
        background-position-y:-385px;
      }
      &.ground .image {
        background-position-y:-462px;
      }
      &.pds .image {
        background-position-y:-539px;
      }
      &.dock .image {
        background-position-y:-616px;
      }
      .name {
        .hidden;
      }
      .battle {
        z-index: 2;
        position: absolute;
        top: 34px;
        left: -3px;
        font-size: 16px;
        font-weight: bold;
        background: url("/images/battle-value.png") no-repeat;
        height: 30px;
        width: 30px;
        .value {
          display: block;
          line-height: 30px;
          text-align: center;
        }
        span {
          .hidden;
        }
      }
      .dice {
        .hidden;
      }
      .quantity {
        position: absolute;
        top:0px;
        right: 5px;
        width: 40px;
        text-align: center;
        font-weight: bold;
        line-height: 1;
        .value {
          color: #454F60;
          font-size: 57px;
          // text-shadow: -1px -1px #222;
          line-height: 63px;
        }
        &.double .value {
          font-size: 40px;
        }
        a {
          display: block;
          font-size: 48px;
          color: #9FA4C0;
          &.decrease {
            line-height: 35px;
          }
        }
      }
      .adjust-battle-values {
        .hidden;
        #battle > .force > .unit > .quantity;
        .value {
          font-size: 35px;
        }
        &.positive {
          .value {
            color: #060;
          }
        }
        &.negative {
          .value {
            color: #600;
          }
        }
      }
      .damage {
        position: relative;
        z-index: 10;
        width: 100%;
        height: 100%;
        a {
          position: absolute;
          top: 0;
          left: 0;
          display: block;
          width: 100%;
          height: 100%;
          .hide-text;
          z-index: 2;
        }
        .value {
          position: absolute;
          top: 17px;
          right: 28px;
          background: url("/images/unit-damage.png") no-repeat;
          width: 66px;
          height: 66px;
          display: block;
          text-align: center;
          font-weight: bold;
          font-size: 28px;
          line-height: 66px;
          color: #FFF;
          text-shadow: 1px 1px @grayDarker;
          z-index: 1;
        }
        &.zero {
          .value {
            .hidden;
          }
        }
      }
      .rolls {
        position: absolute;
        top: 150px;
        #font > .monospace(14px, normal, 15px);
        margin-left: 5px;
        margin-right: 15px;
        .hit {
          color: #080;
        }
        .miss {
          color: @grayLight;
        }
      }
    } //.unit
    &.color-red .unit .image {
    }
    &.color-orange .unit .image {
      background-position-x: -77px;
    }
    &.color-yellow .unit .image {
      background-position-x: -154px;
    }
    &.color-green .unit .image {
      background-position-x: -231px;
    }
    &.color-blue .unit .image {
      background-position-x: -308px;
    }
    &.color-purple .unit .image {
      background-position-x: -385px;
    }
    &.color-gray .unit .image {
      background-position-x: -462px;
    }
    &.color-black .unit .image {
      background-position-x: -539px;
    }
    .force-actions {
      position: absolute;
      top: 115px;
      right: -25px;
      line-height: 22px;
      font-size: 12px;
      width: 95px;
      a {
        color: @grayDark;
        padding-left: 21px;
        display: inline-block;
      }
      .clear-units a {
        background: url("/images/btn-clear-units.png") no-repeat left center;
      }
      .adjust-battle-values a {
        background: url("/images/btn-adjust-battle.png") no-repeat left center;
      }
      .adjust-damage-values a {
        background: url("/images/btn-adjust-damage.png") no-repeat left center;
      }
      .clear-damage a {
        background: url("/images/btn-clear-damage.png") no-repeat left center;
      }
    }
    & > .damage {
      position: absolute;
      top: 31px;
      right: -25px;
      font-size: 14px;
      font-weight: lighter;
      width: 220px;
      div {
        display: inline-block;
        position: absolute;
      }
      .hits-from-opponent {
        border-right: 1px solid #CCC;
        padding-right: 8px;
        text-align: right;
        right: 50%;
        color: #C00;
        &.zero {
          color: inherit;
        }
      }
      .damage-applied {
        display: inline-block;
        border-left: 1px solid #FFF;
        padding-left: 5px;
        left: 50%;
      }
      .label {
        display: block;
      }
      .value {
        font-weight: bold;
        font-size: 24px;
      }
    }

  } //.force

  .round-summary {

    h2 .win, h2 .draw {
      .hidden;
    }

    &.win {
      h2 .win {
        display: inline;
      }
      h2 .continue {
        .hidden;
      }
    }

    &.draw {
      h2 .draw {
        display: inline;
      }
      h2 .continue {
        .hidden;
      }
    }
  }


  .reset-dice.btn {
    .hidden;
  }

  .resolve-round.btn {
    .hidden;
  }

  .adjusting-battle-values {
    .unit {
      .quantity {
        .hidden;
      }
      .adjust-battle-values {
        display: block;
      }
    }
  }

  // After dice have been rolled we start applying damage
  &.dice-rolled {
    .hits-from-opponent {
      display: block;
    }
    .unit .quantity a {
      visibility: hidden;
    }
    .damage {
      display: block;
    }

    .roll-dice.btn {
      .hidden;
    }
    .reset-dice.btn {
      display: inline-block;
    }
    .resolve-round.btn {
      display: inline-block;
    }
    .before-dice {
      .hidden;
    }
  }

  &.round-resolved {
    .reset-dice.btn {
      .hidden;
    }
  }

}

